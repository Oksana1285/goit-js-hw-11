{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst messages = {\n  Info: 'Please enter a value in the search field!',\n  Warning:\n    'Sorry, there are no images matching your search query. Please try again!',\n  Error:\n    'Sorry, there are no connection to the server. Please try again later! ',\n  Exception:\n    'Exception: We have some issue with connection. Please try again later! ',\n};\n\nconst messegesBgColor = {\n  green: '#14b454',\n  yellow: '#e52a2a',\n  red: '#e5c32a',\n};\n\nfunction showMessage(message, color) {\n  iziToast.info({\n    position: 'topRight',\n    backgroundColor: `${color}`,\n    message: `${message}`,\n  });\n}\n\nexport { messages, messegesBgColor, showMessage };\n\nconst options = {\n  method: 'GET',\n};\n\nconst API_KEY = '46849284-22f4e981648a1afff2e3fd4a3';\nconst API_URL = 'https://pixabay.com/api/?';\n\nexport async function getGallery(queryValue) {\n  try {\n    const searchParams = new URLSearchParams({\n      key: API_KEY,\n      q: queryValue,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    });\n\n    const response = await fetch(API_URL + searchParams, options).then();\n    if (!response.ok) {\n      showMessage(messages.Error, messegesBgColor.yellow);\n      return;\n    }\n    return await response.json();\n  } catch (error) {\n    showMessage(\n      `${messages.Exception} ERROR: ${error}`,\n      messegesBgColor.yellow\n    );\n  }\n}\n","// var 2\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst box = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function renderGallery(arr, tagToInsert) {\n  tagToInsert.innerHTML = createMarkup(arr);\n\n  box.refresh();\n}\n\nfunction createMarkup(arr) {\n  return arr.hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-item\">\n\t\t\t\t\t<a class=\"gallery-link\" href=\"${largeImageURL}\">\n\t\t\t\t\t\t<figure class=\"gallery-figure \">\n\t\t\t\t\t\t\t<img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\">\n\t\t\t\t\t\t\t\t\t<ul class=\"img-wrap\">\n\t\t\t\t\t\t\t\t\t<li>Likes<span>${likes}</span></li>\n\t\t\t\t\t\t\t\t\t<li>Views<span>${views}</span></li>\n\t\t\t\t\t\t\t\t\t<li>Comments<span>${comments}</span></li>\n\t\t\t\t\t\t\t\t\t<li>Downloads<span>${downloads}</span></li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</figure>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t`\n    )\n    .join('');\n}\n","import iziToast from 'izitoast';\n\nimport {\n  getGallery,\n  showMessage,\n  messages,\n  messegesBgColor,\n} from './js/pixabay-api';\n\nimport { renderGallery } from './js/render-functions';\n\nconst formSearch = document.querySelector('.search-form');\nconst listImages = document.querySelector('.gallery');\nconst div = document.createElement('div');\n\nformSearch.addEventListener('submit', onSearch);\n\nasync function onSearch(event) {\n  event.preventDefault();\n\n  iziToast.destroy();\n  listImages.innerHTML = '';\n  addLoader();\n\n  const formData = new FormData(event.target);\n  const { search } = Object.fromEntries(formData.entries());\n\n  if (!search.trim()) {\n    showMessage(messages.Info, messegesBgColor.green);\n    listImages.innerHTML = '';\n    return;\n  }\n\n  try {\n    const galleryData = await getGallery(search.trim());\n    if (validateGalleryData(galleryData)) {\n      renderGallery(galleryData, listImages);\n    }\n  } catch (error) {\n    showMessage(messages.Exception + error, messegesBgColor.yellow);\n  }\n\n  event.target.reset();\n}\n\nfunction addLoader() {\n  div.classList.add('loader');\n  listImages.append(div);\n}\n\nfunction validateGalleryData(galleryData) {\n  if (!galleryData) {\n    gallery.innerHTML = '';\n    return false;\n  } else if (galleryData && galleryData.totalHits === 0) {\n    showMessage(messages.Warning, messegesBgColor.red);\n    listImages.innerHTML = '';\n    return false;\n  } else {\n    return true;\n  }\n}\n"],"names":["messages","messegesBgColor","showMessage","message","color","iziToast","options","API_KEY","API_URL","getGallery","queryValue","searchParams","response","error","box","SimpleLightbox","renderGallery","arr","tagToInsert","createMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","formSearch","listImages","div","onSearch","event","addLoader","formData","search","galleryData","validateGalleryData"],"mappings":"6vBAGA,MAAMA,EAAW,CACf,KAAM,4CACN,QACE,2EACF,MACE,yEACF,UACE,yEACJ,EAEMC,EAAkB,CACtB,MAAO,UACP,OAAQ,UACR,IAAK,SACP,EAEA,SAASC,EAAYC,EAASC,EAAO,CACnCC,EAAS,KAAK,CACZ,SAAU,WACV,gBAAiB,GAAGD,CAAK,GACzB,QAAS,GAAGD,CAAO,EACvB,CAAG,CACH,CAIA,MAAMG,EAAU,CACd,OAAQ,KACV,EAEMC,EAAU,qCACVC,EAAU,4BAET,eAAeC,EAAWC,EAAY,CAC3C,GAAI,CACF,MAAMC,EAAe,IAAI,gBAAgB,CACvC,IAAKJ,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAClB,CAAK,EAEKE,EAAW,MAAM,MAAMJ,EAAUG,EAAcL,CAAO,EAAE,OAC9D,GAAI,CAACM,EAAS,GAAI,CAChBV,EAAYF,EAAS,MAAOC,EAAgB,MAAM,EAClD,MACD,CACD,OAAO,MAAMW,EAAS,MACvB,OAAQC,EAAO,CACdX,EACE,GAAGF,EAAS,SAAS,WAAWa,CAAK,GACrCZ,EAAgB,MACtB,CACG,CACH,CCtDA,MAAMa,EAAM,IAAIC,EAAe,aAAc,CAC3C,SAAU,GACV,aAAc,MACd,aAAc,GAChB,CAAC,EAEM,SAASC,EAAcC,EAAKC,EAAa,CAC9CA,EAAY,UAAYC,EAAaF,CAAG,EAExCH,EAAI,QAAO,CACb,CAEA,SAASK,EAAaF,EAAK,CACzB,OAAOA,EAAI,KACR,IACC,CAAC,CACC,aAAAG,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IACC;AAAA,qCAC6BL,CAAa;AAAA;AAAA,yCAETD,CAAY,UAAUE,CAAI;AAAA;AAAA,0BAEzCC,CAAK;AAAA,0BACLC,CAAK;AAAA,6BACFC,CAAQ;AAAA,8BACPC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA,GAMlC,EACA,KAAK,EAAE,CACZ,CCjCA,MAAMC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAa,SAAS,cAAc,UAAU,EAC9CC,EAAM,SAAS,cAAc,KAAK,EAExCF,EAAW,iBAAiB,SAAUG,CAAQ,EAE9C,eAAeA,EAASC,EAAO,CAC7BA,EAAM,eAAc,EAEpB1B,EAAS,QAAO,EAChBuB,EAAW,UAAY,GACvBI,IAEA,MAAMC,EAAW,IAAI,SAASF,EAAM,MAAM,EACpC,CAAE,OAAAG,CAAM,EAAK,OAAO,YAAYD,EAAS,QAAO,CAAE,EAExD,GAAI,CAACC,EAAO,OAAQ,CAClBhC,EAAYF,EAAS,KAAMC,EAAgB,KAAK,EAChD2B,EAAW,UAAY,GACvB,MACD,CAED,GAAI,CACF,MAAMO,EAAc,MAAM1B,EAAWyB,EAAO,KAAM,CAAA,EAC9CE,EAAoBD,CAAW,GACjCnB,EAAcmB,EAAaP,CAAU,CAExC,OAAQf,EAAO,CACdX,EAAYF,EAAS,UAAYa,EAAOZ,EAAgB,MAAM,CAC/D,CAED8B,EAAM,OAAO,OACf,CAEA,SAASC,GAAY,CACnBH,EAAI,UAAU,IAAI,QAAQ,EAC1BD,EAAW,OAAOC,CAAG,CACvB,CAEA,SAASO,EAAoBD,EAAa,CACxC,OAAKA,EAGMA,GAAeA,EAAY,YAAc,GAClDjC,EAAYF,EAAS,QAASC,EAAgB,GAAG,EACjD2B,EAAW,UAAY,GAChB,IAEA,IAPP,QAAQ,UAAY,GACb,GAQX"}